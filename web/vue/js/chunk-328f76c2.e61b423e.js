(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-328f76c2"],{"067f":function(s,t,e){"use strict";e.r(t);var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("van-row",{staticStyle:{"background-color":"#fff","border-bottom":"rgb(199, 196, 196) 1px solid"},attrs:{type:"flex",justify:"center",align:"center"}},[e("van-col",{attrs:{span:"4"}},[e("div",{on:{click:function(t){return s.goback()}}},[e("i",{staticClass:"iconfont icon-fanhui",staticStyle:{color:"grey","font-size":"25px"}})])]),e("van-col",{attrs:{span:"16"}},[e("van-search",{attrs:{"show-action":"",placeholder:"请输入商品关键字"},on:{input:function(t){return s.inputing()}},scopedSlots:s._u([{key:"action",fn:function(){},proxy:!0}]),model:{value:s.query,callback:function(t){s.query=t},expression:"query"}})],1),e("van-col",{attrs:{span:"4"}},[e("div",{staticClass:"Searchbtn",on:{click:function(t){return s.onSearch()}}},[s._v("搜索")])])],1),0==s.searchlist&&0==s.isshowkeyword||""==s.query?e("div",{staticClass:"searchcontent"},[0!=s.searchoverlist?e("div",{staticClass:"searchhistory"},[e("p",[s._v("最近搜索")]),e("span",{on:{click:function(t){return s.clear()}}},[e("i",{staticClass:"iconfont icon-SHANCHU",staticStyle:{color:"grey","font-size":"20px"}})])]):s._e(),e("div",{staticClass:"card"},s._l(s.searchoverlist,(function(t,i){return e("span",{key:i},[e("van-tag",{staticClass:"cardbg",attrs:{closeable:"","text-color":"#686868",size:"medium"},on:{close:function(t){return s.deletehistorytiem(i)},click:function(t){return s.onhistory(i)}}},[s._v(" "+s._s(t)+" ")])],1)})),0),e("div",{staticClass:"searchhistory"},[e("p",[s._v("热门搜索")]),e("span",{on:{click:function(t){return s.hidden()}}},[s._v(" 隐藏 ")])]),1==s.listhidden?e("div",{staticClass:"card"},s._l(s.hotlist,(function(t,i){return e("span",{key:i},[e("van-tag",{staticClass:"cardbg",attrs:{"text-color":"#686868",size:"medium"},on:{click:function(t){return s.onhot(i)}}},[s._v(" "+s._s(t)+" ")])],1)})),0):s._e(),0==s.listhidden?e("div",[e("p",[s._v("已隐藏搜索发现")])]):s._e()]):s._e(),1==s.isshowkeyword?e("div",s._l(s.keyword,(function(t,i){return e("div",{key:i,staticClass:"wordlist"},[e("p",{on:{click:function(e){return s.gokeyword(t.goods_name)}}},[s._v(s._s(t.goods_name))])])})),0):s._e(),0!=s.searchlist&&""!=s.query&&0==s.isshowkeyword?e("van-pull-refresh",{on:{refresh:s.onRefresh},model:{value:s.refreshing,callback:function(t){s.refreshing=t},expression:"refreshing"}},[e("van-list",{attrs:{finished:s.finished,"finished-text":"没有更多了"},on:{load:s.onLoad},model:{value:s.loading,callback:function(t){s.loading=t},expression:"loading"}},s._l(s.searchlist,(function(t,i){return e("van-cell",{key:i},[e("div",{staticClass:"goodsitem",on:{click:function(e){return s.gogoods(t.goods_id)}}},[e("div",{staticClass:"goodsimg"},[e("img",{attrs:{src:t.goods_small_logo,alt:""}})]),e("div",{staticClass:"goodscontent"},[e("div",{staticClass:"goodsname"},[s._v(" "+s._s(t.goods_name)+" ")]),e("em",[s._v(" ￥ "),e("span",{staticClass:"price"},[s._v(s._s(t.goods_price))]),s._v(" .00 ")]),e("div",{staticClass:"goodsatr"},[e("span",[s._v(" 重量 :"+s._s(t.goods_weight)+"g")]),e("span",[s._v(" 数量:"+s._s(t.goods_number))])]),e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticClass:"storename"},[e("span",{staticStyle:{"align-self":"center"}},[s._v(" 濠帅京东自营店 ")]),e("van-icon",{staticStyle:{"align-self":"center"},attrs:{name:"arrow"}})],1),e("van-icon",{staticStyle:{"align-self":"center"},attrs:{color:"#e4393c",size:"20",name:"cart-o"}})],1)])])])})),1)],1):s._e()],1)},o=[],a=(e("a434"),{data:function(){return{query:"",searchoverlist:[],hotlist:["韩都衣舍2017韩版","妈咪包","电脑","电视","洗衣机","冰箱","零食"],keyword:[],isshowkeyword:!1,searchlist:[],pagenum:0,listhidden:!0,loading:!1,finished:!1,refreshing:!1}},created:function(){this.$route.query.goodsname&&(this.query=this.$route.query.goodsname,this.onSearch(),this.isshowkeyword=!1);var s=localStorage.getItem("historySearch");s?this.searchoverlist=JSON.parse(s):s=[]},methods:{gogoods:function(s){this.$router.push({path:"/goods",query:{goodId:s}})},gokeyword:function(s){var t=this;if(this.pagenum=0,this.finished=!1,this.$http.get("https://api-hmugo-web.itheima.net/api/public/v1/goods/search",{params:{query:s,pagesize:20,pagenum:0}}).then((function(s){200==s.data.meta.status?(console.log(s.data.message.goods),t.searchlist=s.data.message.goods):console.log("搜索失败")})).catch((function(s){console.log(s)})),0==this.searchoverlist.length)this.searchoverlist.push(this.query),console.log("ss");else{for(var e=0;e<this.searchoverlist.length;e++)if(-1==this.searchoverlist.indexOf(this.query)){this.searchoverlist.push(this.query);break}console.log(this.searchoverlist),this.savesearch()}this.isshowkeyword=!1},inputing:function(){var s=this;this.isshowkeyword=!0,console.log(this.isshowkeyword),this.$http.get("https://api-hmugo-web.itheima.net/api/public/v1/goods/qsearch",{params:{query:this.query}}).then((function(t){200==t.data.meta.status?(console.log(t.data.message),s.keyword=t.data.message):(console.log("搜索失败"),s.keyword=[])})).catch((function(s){console.log(s)}))},onLoad:function(){var s=this;setTimeout((function(){s.pagenum++,s.refreshing&&(s.searchlist=[],s.refreshing=!1),s.$http.get("https://api-hmugo-web.itheima.net/api/public/v1/goods/search",{params:{query:s.query,pagesize:20,pagenum:s.pagenum}}).then((function(t){if(200==t.data.meta.status){console.log(t.data.message.goods+s.pagenum);for(var e=0;e<t.data.message.goods.length;e++)s.searchlist.push(t.data.message.goods[e]);s.loading=!1,0==t.data.message.goods.length&&(s.pagenum=0,console.log(s.pagenum),s.finished=!0)}})).catch((function(s){console.log(s)}))}),1e3)},onRefresh:function(){this.finished=!1,this.pagenum=0,console.log(this.pagenum),this.loading=!0,this.onLoad()},savesearch:function(){localStorage.setItem("historySearch",JSON.stringify(this.searchoverlist))},onhistory:function(s){this.pagenum=0,this.finished=!1,this.query=this.searchoverlist[s],this.onSearch(),this.isshowkeyword=!1},onhot:function(s){if(this.pagenum=0,this.query=this.hotlist[s],this.onSearch(),0==this.searchoverlist.length)this.searchoverlist.push(this.hotlist[s]),console.log("ss");else for(var t=0;t<this.searchoverlist.length;t++)if(-1==this.searchoverlist.indexOf(this.hotlist[s])){this.searchoverlist.push(this.hotlist[s]);break}this.savesearch(),this.finished=!1,this.isshowkeyword=!1},deletehistorytiem:function(s){this.searchoverlist.splice(s,1),this.savesearch()},deleteitem:function(s){this.hotlist.delete(s)},hidden:function(){this.listhidden=!this.listhidden},clear:function(){this.searchoverlist=[],this.savesearch()},goback:function(){this.$router.go(-1)},onSearch:function(){var s=this;if(this.pagenum=0,this.finished=!1,this.isshowkeyword=!1,"undefined"==typeof this.query||null==this.query||""==this.query)console.log("输入搜索词为空串");else if(this.$http.get("https://api-hmugo-web.itheima.net/api/public/v1/goods/search",{params:{query:this.query,pagesize:20,pagenum:0}}).then((function(t){200==t.data.meta.status?(console.log(t.data.message.goods),s.searchlist=t.data.message.goods):console.log("搜索失败")})).catch((function(s){console.log(s)})),0==this.searchoverlist.length)this.searchoverlist.push(this.query),console.log("ss");else{for(var t=0;t<this.searchoverlist.length;t++)if(-1==this.searchoverlist.indexOf(this.query)){this.searchoverlist.push(this.query);break}this.savesearch()}}}}),n=a,r=(e("7572"),e("2877")),h=Object(r["a"])(n,i,o,!1,null,null,null);t["default"]=h.exports},7572:function(s,t,e){"use strict";e("7b70")},"7b70":function(s,t,e){}}]);